<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:core="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core">
	
	<ui:composition template="/template/template.xhtml">
		<ui:define name="pad">&nbsp;</ui:define>
		<ui:define name="titulo">#{msgs.nome_aplicativo_resumido}</ui:define>
		<ui:define name="titulo_pagina">#{msgs.nome_pag_triagem}</ui:define>
		<ui:define name="conteudo">
			<script type="text/javascript" src="../js/formatadores.js"></script>
			<style type="text/css">
				.coluna1_form{
					width: 160px;
					text-align: right;
					font-weight: bolder;
					background-color: #F2F2F2;
					white-space: nowrap;
				}
				.coluna2_form{
					width: 290px;
					white-space: nowrap;
				}
				.coluna1{
					width: 10%;
					text-align: right;
					font-weight: bolder;
					background-color: #F2F2F2;
					white-space: nowrap;
				}
				.coluna2{
					width: 23%;
				}
				.coluna4{
					width: 23%;
				}
				.coluna6{
					width: 24%;
				}
			</style>		
		<h:form id="formGeral">
			<p:growl showDetail="true" showSummary="false" id="msg_local"/>
			<div id="container_conteudo_interno" style="background-color: #FFFFFF;" class="conteudo-principal">
				<p:panel id="pnl" header="#{msgs.resumo_inf_lote}" toggleable="true" toggleSpeed="500" widgetVar="panel" collapsed="#{triagemBean.painelEncolhido}">
				
					<p:ajax event="toggle" listener="#{triagemBean.encolheuPainel}"/>
				
					<p:panelGrid columnClasses="coluna1,coluna2,coluna3,coluna4,coluna5,coluna6" style="width:945px">
						<p:row>
							<p:column styleClass="coluna1">#{msgs.cliente_msg}</p:column>
							<p:column styleClass="coluna2"><h:outputText value="#{triagemBean.triagemLote.calendario.warehouse.cliente.nomeFantasia}" /></p:column>
							
							<p:column styleClass="coluna1">#{msgs.warehouse_msg}</p:column>
							<p:column styleClass="coluna4"><h:outputText value="#{triagemBean.triagemLote.calendario.warehouse.nomeFantasia}" /></p:column>
							
							<p:column styleClass="coluna1">#{msgs.qtd_msg}</p:column>
							<p:column styleClass="coluna6"><h:outputText value="#{triagemBean.quantidadeAparelhoTriado} #{msgs.de_msg} #{triagemBean.triagemLote.quantidade}" /></p:column>
						</p:row>
						<p:row>
							<p:column styleClass="coluna1">#{msgs.marca_msg}</p:column>
							<p:column styleClass="coluna2"><h:outputText value="#{triagemBean.triagemLote.aparelhoModelo.aparelhoMarca.nome}" /></p:column>
							
							<p:column styleClass="coluna1">#{msgs.modelo_msg}</p:column>
							<p:column styleClass="coluna4"><h:outputText value="#{triagemBean.triagemLote.aparelhoModelo.nome}" /></p:column>
							
							<p:column styleClass="coluna1">#{msgs.familia_msg}</p:column>
							<p:column styleClass="coluna6"><h:outputText value="#{triagemBean.triagemLote.calendario.descFamilias}" /></p:column>
						</p:row>
						<p:row>
							<p:column styleClass="coluna1">#{msgs.responsavel_msg}</p:column>
							<p:column styleClass="coluna2"><h:outputText value="#{triagemBean.triagemLote.calendario.usuarioResponsavel.nome}" /></p:column>
							
							<p:column styleClass="coluna1">#{msgs.contato_msg}</p:column>
							<p:column styleClass="coluna4"><h:outputText value="#{triagemBean.triagemLote.calendario.contato}" /></p:column>
							
							<p:column styleClass="coluna1">#{msgs.codigo_lote}</p:column>
							<p:column styleClass="coluna6"><h:outputText value="#{triagemBean.triagemLote.id}" /></p:column>
						</p:row>
					</p:panelGrid>
				</p:panel>
				<br/>
				<!-- ############################################################################################################## -->
				<p:panel id="pnl_triagem" header="#{msgs.formulario_triagem}" widgetVar="panelt">
					<p:panelGrid style="width:945px">
						<f:facet name="footer">
							<p:row>
								<p:column style="text-align:right">
									<p:commandButton action="#{triagemBean.verificarDadosParaRevisao()}" value="#{msgs.verificar_dado_revisao}" type="submit" update="@form msg_local"/>
									<p:commandButton value="#{msgs.limpar_msg}" type="reset"/>
								</p:column>
							</p:row>
					    </f:facet>
					</p:panelGrid>
					<p:panelGrid style="width:945px">
						<p:row>
							<core:if test="${triagemBean.temTiposSerial1 == true}">
								<p:column styleClass="coluna1_form"><h:outputLabel value="#{triagemBean.triagemLote.aparelhoModelo.id1.descricao}" for="ident_1"/></p:column>
								<p:column>
									<span style="float: left;">
										<p:inputText id="ident_1" size="25" value="#{triagemBean.triagem.identificador1}" required="false" label="#{triagemBean.triagemLote.aparelhoModelo.id1.descricao}" onkeyup="#{triagemBean.triagemLote.aparelhoModelo.id1.onkeyup}" maxlength="#{triagemBean.triagemLote.aparelhoModelo.id1.tamanho}">
										    <f:validator validatorId="validaTriagem" />
	    									<f:attribute name="tipoSerial" value="#{triagemBean.triagemLote.aparelhoModelo.id1.cod}" />
	    									<p:ajax update="msg_1" event="blur" />
										</p:inputText>
									</span> 
									<span style="float: left;">
										<p:message for="ident_1" id="msg_1" display="icon" showSummary="false" showDetail="true"/>
									</span>
								</p:column>
							</core:if>
							
							<core:if test="${triagemBean.temTiposSerial2 == true}">
								<p:column styleClass="coluna1_form"><h:outputLabel value="#{triagemBean.triagemLote.aparelhoModelo.id2.descricao}" for="ident_2"/></p:column>
								<p:column>
									<span style="float: left;">
										<p:inputText id="ident_2" size="25" value="#{triagemBean.triagem.identificador2}" required="false" label="#{triagemBean.triagemLote.aparelhoModelo.id2.descricao}" onkeyup="#{triagemBean.triagemLote.aparelhoModelo.id2.onkeyup}" maxlength="#{triagemBean.triagemLote.aparelhoModelo.id2.tamanho}">
										    <f:validator validatorId="validaTriagem" />
	    									<f:attribute name="tipoSerial" value="#{triagemBean.triagemLote.aparelhoModelo.id2.cod}" />
	    									<p:ajax update="msg_2" event="blur" />
										</p:inputText>
									</span> 
									<span style="float: left;">
										<p:message for="ident_2" id="msg_2" display="icon" showSummary="false" showDetail="true"/>
									</span>
								</p:column>
							</core:if>
							
							<core:if test="${triagemBean.temTiposSerial3 == true}">
								<p:column styleClass="coluna1_form"><h:outputLabel value="#{triagemBean.triagemLote.aparelhoModelo.id3.descricao}" for="ident_3"/></p:column>
								<p:column>
									<span style="float: left;">
										<p:inputText id="ident_3" size="25" value="#{triagemBean.triagem.identificador3}" required="false" label="#{triagemBean.triagemLote.aparelhoModelo.id3.descricao}" onkeyup="#{triagemBean.triagemLote.aparelhoModelo.id3.onkeyup}" maxlength="#{triagemBean.triagemLote.aparelhoModelo.id3.tamanho}">
										    <f:validator validatorId="validaTriagem" />
	    									<f:attribute name="tipoSerial" value="#{triagemBean.triagemLote.aparelhoModelo.id3.cod}" />
	    									<p:ajax update="msg_3" event="blur" />
										</p:inputText>
									</span> 
									<span style="float: left;">
										<p:message for="ident_3" id="msg_3" display="icon" showSummary="false" showDetail="true"/>
									</span>
								</p:column>
							</core:if>
							
							<core:if test="${triagemBean.temTiposSerial4 == true}">
								<p:column styleClass="coluna1_form"><h:outputLabel value="#{triagemBean.triagemLote.aparelhoModelo.id4.descricao}" for="ident_4"/></p:column>
								<p:column>
									<span style="float: left;">
										<p:inputText id="ident_4" size="25" value="#{triagemBean.triagem.identificador4}" required="false" label="#{triagemBean.triagemLote.aparelhoModelo.id4.descricao}" onkeyup="#{triagemBean.triagemLote.aparelhoModelo.id4.onkeyup}" maxlength="#{triagemBean.triagemLote.aparelhoModelo.id4.tamanho}">
										    <f:validator validatorId="validaTriagem" />
	    									<f:attribute name="tipoSerial" value="#{triagemBean.triagemLote.aparelhoModelo.id4.cod}" />
	    									<p:ajax update="msg_4" event="blur" />
										</p:inputText>
									</span> 
									<span style="float: left;">
										<p:message for="ident_4" id="msg_4" display="icon" showSummary="false" showDetail="true"/>
									</span>
								</p:column>
							</core:if>
						</p:row>
					</p:panelGrid>
					<br/>
					<!-- ############################################################################################################## -->
					<p:panelGrid style="width:945px">
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.consta_aut_ccc}" for="aut_ccc"/></p:column>
							<p:column styleClass="coluna2_form"><p:selectBooleanCheckbox value="#{triagemBean.triagem.autorizacaoCcc}" id="aut_ccc"/></p:column>

							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.possui_check_list}" for="check_list"/></p:column>
							<p:column><p:selectBooleanCheckbox value="#{triagemBean.triagem.possuiCheckList}" id="check_list"/></p:column>
						</p:row>
						
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.ap_bloqueado}" for="bloq"/></p:column>
							<p:column styleClass="coluna2_form"><p:selectBooleanCheckbox value="#{triagemBean.triagem.aparelhoBloqueado}" id="bloq"/></p:column>

							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.operadora_msg}" for="operadora"/></p:column>
							<p:column>
								<p:selectOneMenu id="operadora" value="#{triagemBean.triagem.operadora}" label="" style="width:150px">
									<f:selectItem itemLabel="Escolha" itemValue="false"/>
									<f:selectItems value="#{triagemBean.operadorasCombo}"/>
								</p:selectOneMenu>
							</p:column>
						</p:row>
						
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.tempo_uso}" for="tempo_uso"/></p:column>
							<p:column styleClass="coluna2_form">
								<p:inputText maxlength="9" required="false" value="#{triagemBean.tempoUsoAparelho}" id="tempo_uso" onblur="verificaCampoTempo(this);" onkeyup="formataTempo(this)" size="8">
				            		<f:validateLength minimum="9"/>
				            	</p:inputText>
							</p:column>

							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.aparencia_msg}" for="aparencia"/></p:column>
							<p:column>
								<p:selectOneMenu id="aparencia" value="#{triagemBean.triagem.aparencia}" label="" style="width:230px" panelStyle="width:380px">
									<f:selectItem itemLabel="Escolha" itemValue="false"/>
									<f:selectItems value="#{triagemBean.tipoAparenciaAparelho}"/>
								</p:selectOneMenu>
							</p:column>
						</p:row>
						
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.sintoma_inf}" for="sin_inf"/></p:column>
							<p:column styleClass="coluna2_form">
								<p:selectOneMenu id="sin_inf" value="#{triagemBean.triagem.sintomaInformado}" label="" style="width:230px" panelStyle="width:350px">
									<f:selectItem itemLabel="Escolha" itemValue=""/>
									<f:selectItems value="#{triagemBean.sintomaInformado}"/>
								</p:selectOneMenu>
							</p:column>

							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.sintoma_constatado}" for="sin_cons"/></p:column>
							<p:column>
								<p:selectOneMenu id="sin_cons" value="#{triagemBean.triagem.sintomaConstatado}" label="" style="width:230px" panelStyle="width:350px">
									<f:selectItem itemLabel="Escolha" itemValue=""/>
									<f:selectItems value="#{triagemBean.sintomaConstatado}"/>
								</p:selectOneMenu>
							</p:column>
						</p:row>
					</p:panelGrid>
					<br/>
					<!-- ############################################################################################################## -->
					<p:panelGrid style="width:945px">
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.num_nf_venda}" for="nm_nf_venda"/></p:column>
							<p:column styleClass="coluna2_form"><p:inputText id="nm_nf_venda" size="25" value="#{triagemBean.triagem.nfVendaNumero}" required="true" label="NF" onkeyup="formatarNumero(this)" maxlength="15"/></p:column>

							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.data_nf_venda}" for="dt_nf_venda"/></p:column>
							<p:column>
								<p:calendar id="dt_nf_venda" value="#{triagemBean.triagem.nfVendaData}" pattern="dd/MM/yyyy" maxlength="10"
				            		locale="#{agendaIncialBean.localeAbr}" required="true" size="10" showButtonPanel="true" onkeyup="formataData(this);" label="Data NF">
				            		<f:validateLength minimum="10"/>
				            	</p:calendar>
							</p:column>
						</p:row>
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.num_nf_troca}" for="nm_nf_troca"/></p:column>
							<p:column styleClass="coluna2_form"><p:inputText id="nm_nf_troca" size="25" value="#{triagemBean.triagem.nfTrocaNumero}" required="false" label="NF" onkeyup="formatarNumero(this)" maxlength="15"/></p:column>

							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.data_nf_troca}" for="dt_nf_venda"/></p:column>
							<p:column>
								<p:calendar id="dt_nf_troca" value="#{triagemBean.triagem.nfTrocaData}" pattern="dd/MM/yyyy" maxlength="10"
				            		locale="#{agendaIncialBean.localeAbr}" size="10" showButtonPanel="true" onkeyup="formataData(this);" label="Data NF">
				            		<f:validateLength minimum="10"/>
				            	</p:calendar>
							</p:column>
						</p:row>
					</p:panelGrid>
					<br/>
					<!-- ############################################################################################################## -->
					<p:panelGrid style="width:945px">
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_num_os} 1" for="nm_os1"/></p:column>
							<p:column styleClass="coluna2_form"><p:inputText id="nm_os1" size="25" value="#{triagemBean.triagem.osNumero1}" required="false" label="OS" onkeyup="formatarNumero(this)" maxlength="25"/></p:column>

							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_cod_peca_os} 1" for="cod_os1"/></p:column>
							<p:column><p:inputText id="cod_os1" size="25" value="#{triagemBean.triagem.osCodPeca1}" required="false" label="OS" maxlength="25"/></p:column>
						</p:row>
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_data_abert_os} 1" for="dt_ab_os1"/></p:column>
							<p:column styleClass="coluna2_form">
								<p:calendar id="dt_ab_os1" value="#{triagemBean.triagem.osDataAbertura1}" pattern="dd/MM/yyyy" maxlength="10"
				            		locale="#{agendaIncialBean.localeAbr}" size="10" showButtonPanel="true" onkeyup="formataData(this);" label="Data Abertura OS">
				            		<f:validateLength minimum="10"/>
				            	</p:calendar>
							</p:column>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_data_entrega_os} 1" for="dt_et_os1"/></p:column>
							<p:column>
								<p:calendar id="dt_et_os1" value="#{triagemBean.triagem.osDataEntrega1}" pattern="dd/MM/yyyy" maxlength="10"
				            		locale="#{agendaIncialBean.localeAbr}" size="10" showButtonPanel="true" onkeyup="formataData(this);" label="Data NF">
				            		<f:validateLength minimum="10"/>
				            	</p:calendar>
							</p:column>
						</p:row>
					</p:panelGrid>
					<br/>
					<!-- ############################################################################################################## -->
					<p:panelGrid style="width:945px">
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_num_os} 2" for="nm_os2"/></p:column>
							<p:column styleClass="coluna2_form"><p:inputText id="nm_os2" size="25" value="#{triagemBean.triagem.osNumero2}" required="false" label="OS" onkeyup="formatarNumero(this)" maxlength="25"/></p:column>

							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_cod_peca_os} 2" for="cod_os2"/></p:column>
							<p:column><p:inputText id="cod_os2" size="25" value="#{triagemBean.triagem.osCodPeca2}" required="false" label="OS" maxlength="25"/></p:column>
						</p:row>
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_data_abert_os} 2" for="dt_ab_os2"/></p:column>
							<p:column styleClass="coluna2_form">
								<p:calendar id="dt_ab_os2" value="#{triagemBean.triagem.osDataAbertura2}" pattern="dd/MM/yyyy" maxlength="10"
				            		locale="#{agendaIncialBean.localeAbr}" size="10" showButtonPanel="true" onkeyup="formataData(this);" label="Data Abertura OS">
				            		<f:validateLength minimum="10"/>
				            	</p:calendar>
							</p:column>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_data_entrega_os} 2" for="dt_et_os2"/></p:column>
							<p:column>
								<p:calendar id="dt_et_os2" value="#{triagemBean.triagem.osDataEntrega2}" pattern="dd/MM/yyyy" maxlength="10"
				            		locale="#{agendaIncialBean.localeAbr}" size="10" showButtonPanel="true" onkeyup="formataData(this);" label="Data NF">
				            		<f:validateLength minimum="10"/>
				            	</p:calendar>
							</p:column>
						</p:row>
					</p:panelGrid>
					<br/>
					<!-- ############################################################################################################## -->
					<p:panelGrid style="width:945px">
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_num_os} 3" for="nm_os3"/></p:column>
							<p:column styleClass="coluna2_form"><p:inputText id="nm_os3" size="25" value="#{triagemBean.triagem.osNumero3}" required="false" label="OS" onkeyup="formatarNumero(this)" maxlength="25"/></p:column>

							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_cod_peca_os} 3" for="cod_os3"/></p:column>
							<p:column><p:inputText id="cod_os3" size="25" value="#{triagemBean.triagem.osCodPeca3}" required="false" label="OS" maxlength="25"/></p:column>
						</p:row>
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_data_abert_os} 3" for="dt_ab_os3"/></p:column>
							<p:column styleClass="coluna2_form">
								<p:calendar id="dt_ab_os3" value="#{triagemBean.triagem.osDataAbertura3}" pattern="dd/MM/yyyy" maxlength="10"
				            		locale="#{agendaIncialBean.localeAbr}" size="10" showButtonPanel="true" onkeyup="formataData(this);" label="Data Abertura OS">
				            		<f:validateLength minimum="10"/>
				            	</p:calendar>
							</p:column>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.os_data_entrega_os} 3" for="dt_et_os3"/></p:column>
							<p:column>
								<p:calendar id="dt_et_os3" value="#{triagemBean.triagem.osDataEntrega3}" pattern="dd/MM/yyyy" maxlength="10"
				            		locale="#{agendaIncialBean.localeAbr}" size="10" showButtonPanel="true" onkeyup="formataData(this);" label="Data NF">
				            		<f:validateLength minimum="10"/>
				            	</p:calendar>
							</p:column>
						</p:row>
					</p:panelGrid>
					<br/>
					<!-- ############################################################################################################## -->
					<br/>
					<!-- ############################################################################################################## -->
					<p:panelGrid style="width:945px">
						<p:row>
							<p:column styleClass="coluna1_form"><h:outputLabel value="#{msgs.observacao_msg}" for="obs"/></p:column>
							<p:column>
					            <p:inputTextarea id="obs" style="width: 740px" counter="ttt" counterTemplate="#{msgs.caracteres_restantes}" 
					            	value="#{triagemBean.triagem.observacoes}" maxlength="2000" rows="3" autoResize="false"/><br/>
					            <h:outputLabel id="ttt"/>
							</p:column>
						</p:row>
					</p:panelGrid>
					<p:panelGrid style="width:945px">
						<f:facet name="footer">
							<p:row>
								<p:column style="text-align:right">
									<p:commandButton action="#{triagemBean.verificarDadosParaRevisao()}" value="#{msgs.verificar_dado_revisao}" type="submit" ajax="false" update="@form msg_local"/>
									<p:commandButton value="#{msgs.limpar_msg}" type="reset"/>
								</p:column>
							</p:row>
					    </f:facet>
					</p:panelGrid>
				</p:panel>
		    </div>
	    </h:form>
		</ui:define>
	</ui:composition>
</html>