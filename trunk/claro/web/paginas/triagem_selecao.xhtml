<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">
	
	<ui:composition template="/template/template.xhtml">
		<ui:define name="pad">&nbsp;</ui:define>
		<ui:define name="titulo">#{msgs.nome_aplicativo_resumido}</ui:define>
		<ui:define name="titulo_pagina">#{msgs.nome_pag_triagem}</ui:define>
		<ui:define name="conteudo">
		<style type="text/css">
			.coluna{
				width: 55px;
				text-align: right;
			}
		    
			.coluna2{
				width: 85px;
				text-align: right;
			}
			.coluna3{
				width: 65px;
				text-align: right;
			}
		</style>
		
		<h:form id="formGeral">
			<div id="container_conteudo_interno" style="background-color: #FFFFFF;" class="conteudo-principal">
		        <p:blockUI block="formGeral" trigger="tabelaAgendas">  
		        	#{msgs.carregando_msg}<br />  
		        	<p:graphicImage value="../img/icones/ajax-loader.gif"/>  
			    </p:blockUI>
			
				<p:dataTable id="tabelaAgendas" widgetVar="tabelaDeAgendas" var="lista" value="#{triagemSelecaoLoteBean.calendarios}" paginator="true" 
					rows="10" lazy="true" emptyMessage="#{msgs.nenhum_dado_encontrado}"
					paginatorPosition="top">  
			        
					<p:column headerText="#{msgs.codigo_msg}" sortBy="#{lista.id}" styleClass="coluna3">
			 			#{lista.id}
			        </p:column>
			  
			        <p:column headerText="#{msgs.cliente_msg}">
			 			#{lista.warehouse.cliente.nomeFantasia}
			        </p:column>
			
			        <p:column headerText="#{msgs.warehouse_msg}">
			 			#{lista.warehouse.nomeFantasia}
			        </p:column>
			
			        <p:column headerText="#{msgs.data_msg}" sortBy="#{lista.dataInicial}" styleClass="coluna2">
			        	<h:outputText value="#{lista.dataInicial}">
							<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
						</h:outputText>
			        </p:column>
			        
			        <p:column headerText="#{msgs.hora_msg}" styleClass="coluna2">
	   					<h:outputText value="#{lista.dataInicial}">
							<f:convertDateTime pattern="HH:mm" type="time" />
						</h:outputText>
			        </p:column>
			        
			        <p:column headerText="#{msgs.qtd_msg}" sortBy="#{lista.quantidade}" styleClass="coluna">
						#{lista.quantidade}
			        </p:column>
			        
			        <p:column headerText="#{msgs.lote_msg}" styleClass="coluna">
						#{lista.qtdLotes}
			        </p:column>
			        
  					<p:column style="width:16px">
						<p:rowToggler />
					</p:column>
	
			        <p:rowExpansion>
			        	<p:dataTable id="tbConsulta" var="lsInt" value="#{lista.triagemLotes}" widgetVar="tabelaConsulta"
							emptyMessage="#{msgs.nenhum_dado_encontrado}" rowKey="#{lista.id}" selection="#{triagemSelecaoLoteBean.triagemLote}" 
							selectionMode="single" rowStyleClass="classROW">
			        	
							<p:column headerText="#{msgs.codigo_msg}" styleClass="coluna3">
					 			#{lsInt.id}
					        </p:column>
					
							<p:column headerText="#{msgs.data_msg}" styleClass="coluna2">
					        	<h:outputText value="#{lsInt.dataCriacaoLote}">
									<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
								</h:outputText>
					        </p:column>
			
					       	<p:column headerText="#{msgs.hora_msg}" styleClass="coluna2">
			   					<h:outputText value="#{lsInt.dataCriacaoLote}">
									<f:convertDateTime pattern="HH:mm" type="time" />
								</h:outputText>
					        </p:column>
					        
					        <p:column headerText="#{msgs.marca_msg}">
					 			#{lsInt.aparelhoModelo.aparelhoMarca.nome}
					        </p:column>
					
					        <p:column headerText="#{msgs.modelo_msg}">
					 			#{lsInt.aparelhoModelo.nome}
					        </p:column>

					        <p:column headerText=" ">
								<p:commandButton title="Triar" value="#{msgs.triar_esse_lote}" action="#{triagemBean.loteTriagemSelecionado()}" type="submit">  
									<f:setPropertyActionListener value="#{lsInt}" target="#{triagemBean.triagemLote}"/>  
				                </p:commandButton>  
					        </p:column>
				    	</p:dataTable>
				    	<br/>
			        </p:rowExpansion>
			    </p:dataTable>
		    </div>
	    </h:form>
		</ui:define>
	</ui:composition>
</html>