<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:core="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core">
	
	<ui:composition template="/template/template.xhtml">
		<ui:define name="pad">&nbsp;</ui:define>
		<ui:define name="titulo">#{msgs.nome_aplicativo_resumido}</ui:define>
		<ui:define name="titulo_pagina">#{msgs.lista_usuarios}</ui:define>
		<ui:define name="conteudo">
		<style type="text/css">
			.desativado {
                color: #FF0000 !important;
                font-weight: bold !important;
            }
			.nao_autorizado {
                color: #999999 !important;
                font-weight: bold !important;
            }
		</style>
		<h:form id="msgForm">
			<p:growl showDetail="true" showSummary="false" id="msg_local"/>
	        <p:blockUI block="msgForm" trigger="atv,dtv">  
		        #{msgs.carregando_msg}<br />  
		        <p:graphicImage value="../img/icones/ajax-loader.gif"/>  
		    </p:blockUI>

			<p:contextMenu for="tabelaDeTodosUsuarios">
				<p:menuitem value="#{msgs.ativar_usuario}" update="tabelaDeTodosUsuarios" icon="ui-icon-unlocked"
					actionListener="#{listarUsuarioBean.ativarUsuario()}" id="atv"/>
				<p:menuitem value="#{msgs.desativar_usuario}" update="tabelaDeTodosUsuarios" icon="ui-icon-locked"
					actionListener="#{listarUsuarioBean.desativarUsuario()}" id="dtv"/>
				<p:menuitem value="#{msgs.detalhar_msg}" update="dialogoLeituraPainel" icon="ui-icon-zoomin"
					oncomplete="dialogoLeitura.show()" id="det"/>
			</p:contextMenu>
			
			<p:dataTable id="tabelaDeTodosUsuarios" var="lista" value="#{listarUsuarioBean.usuarios}"
				paginator="true" rows="10" emptyMessage="#{msgs.nenhum_dado_encontrado}" style="height:330px" lazy="true"
		    	rowStyleClass="#{lista.ativo == false ? 'desativado' : lista.cadastroConfirmado == false ? 'nao_autorizado' : null}" 
		    	rowKey="#{lista.id}" selection="#{listarUsuarioBean.usuarioCadastro}" selectionMode="single" paginatorPosition="top">
		        
		        <p:column headerText="#{msgs.nome_msg}" sortBy="#{lista.nome}">
   					#{lista.nome}
		        </p:column>
		  
		        <p:column headerText="#{msgs.telefone_msg}">
   					#{lista.telefone1}
		        </p:column>

		        <p:column headerText="#{msgs.celular_msg}">
   					#{lista.telefone2}
		        </p:column>
		        
		        <p:column headerText="#{msgs.msg_login}" sortBy="#{lista.email}">
   					#{lista.email}
		        </p:column>
		        
		        <p:column headerText="#{msgs.endereco_msg}">
   					#{lista.endereco}
		        </p:column>
		        
		    </p:dataTable>
		    
            <p:blockUI block="msgForm" trigger="tabelaDeTodosUsuarios">  
		        #{msgs.carregando_msg}<br />  
		        <p:graphicImage value="../img/icones/ajax-loader.gif"/>  
		    </p:blockUI>  
		    
		    <p:dialog widgetVar="dialogoLeitura" header="#{listarUsuarioBean.usuarioCadastro.nome}" width="400" modal="true" maximizable="true">
		    	<p:outputPanel id="dialogoLeituraPainel" style="text-align:justfy; width:100%" layout="block">
		    		<p:panelGrid style="width:100%; height:100%">
		    			<p:row>
			    			<p:column width="50">#{msgs.nome_msg}</p:column>
			    			<p:column>
			   					<h:outputText value="#{listarUsuarioBean.usuarioCadastro.nome} #{listarUsuarioBean.usuarioCadastro.sobrenome}"/>
			    			</p:column>
		    			</p:row>

		    			<p:row>
			    			<p:column width="50">#{msgs.telefone_msg}</p:column>
			    			<p:column>
			   					<h:outputText value="#{listarUsuarioBean.usuarioCadastro.telefone1}"/>
			    			</p:column>
		    			</p:row>

		    			<p:row>
			    			<p:column width="50">#{msgs.celular_msg}</p:column>
			    			<p:column>
			   					<h:outputText value="#{listarUsuarioBean.usuarioCadastro.telefone2}"/>
			    			</p:column>
		    			</p:row>

		    			<p:row>
			    			<p:column width="50">#{msgs.msg_login}</p:column>
			    			<p:column>
			   					<h:outputText value="#{listarUsuarioBean.usuarioCadastro.email}"/>
			    			</p:column>
		    			</p:row>
		    			
		    			<p:row>
			    			<p:column width="50">#{msgs.bairro_msg}</p:column>
			    			<p:column>
			   					<h:outputText value="#{listarUsuarioBean.usuarioCadastro.bairro}"/>
			    			</p:column>
		    			</p:row>
		    			
		    			<p:row>
			    			<p:column width="50">#{msgs.cidade_msg}</p:column>
			    			<p:column>
			   					<h:outputText value="#{listarUsuarioBean.usuarioCadastro.cidade} - #{listarUsuarioBean.usuarioCadastro.estado}" />
			    			</p:column>
		    			</p:row>
		    			
		    			<p:row>
			    			<p:column width="50">#{msgs.cep_msg}</p:column>
			    			<p:column>
			   					<h:outputText value="#{listarUsuarioBean.usuarioCadastro.cep}"/>
			    			</p:column>
		    			</p:row>
		    			
		    			<p:row>
			    			<p:column width="50">#{msgs.cep_msg}</p:column>
			    			<p:column>
			   					<h:outputText value="#{listarUsuarioBean.usuarioCadastro.cep}"/>
			    			</p:column>
		    			</p:row>
		    			
		    			<p:row>
			    			<p:column width="50">#{msgs.perfil_msg}</p:column>
			    			<p:column>
			   					<h:outputText value="#{listarUsuarioBean.usuarioCadastro.perfil.nome}"/>
			    			</p:column>
		    			</p:row>
		    			
		    			<core:if test="#{listarUsuarioBean.usuarioCadastro.cadastroConfirmado == true}">
			    			<p:row>
				    			<p:column width="50">#{msgs.situacao_msg}</p:column>
				    			<p:column>
				   					<h:outputText value="#{msgs.tp_usuario_autorizado}"/>
				    			</p:column>
			    			</p:row>
		    			</core:if>
		    			
		    			<core:if test="#{listarUsuarioBean.usuarioCadastro.cadastroConfirmado == false}">
			    			<p:row>
				    			<p:column width="50">#{msgs.situacao_msg}</p:column>
				    			<p:column>
				   					<h:outputText value="#{msgs.tp_usuario_desautoriz}"/>
				    			</p:column>
			    			</p:row>
		    			</core:if>
		    			
		    			<f:facet name="footer">
			    			<p:row>
				    			<p:column colspan="2">
									<p:commandButton actionListener="#{listarUsuarioBean.ativarUsuario()}" oncomplete="dialogoLeitura.hide()" 
										icon="ui-icon-unlocked" value="#{msgs.ativar_usuario}" update="tabelaDeTodosUsuarios" id="atv2"/>							    
									<p:commandButton actionListener="#{listarUsuarioBean.desativarUsuario()}" oncomplete="dialogoLeitura.hide()" 
										icon="ui-icon-locked" value="#{msgs.desativar_usuario}" update="tabelaDeTodosUsuarios" id="dtv2"/>							    
								    <p:commandButton oncomplete="dialogoLeitura.hide()" icon="ui-icon-close" value="#{msgs.fechar_msg}" 
								    	update="tabelaDeTodosUsuarios"/>
							    </p:column>
							</p:row>
					    </f:facet>
					</p:panelGrid>
		        </p:outputPanel>
		    </p:dialog>  
		    
		</h:form>
		</ui:define>
	</ui:composition>
</html>