<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:core="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core">

		<h:form id="msgForm_enviadas">
			<p:blockUI block="msgForm_enviadas" trigger="tabelaDeMensagens_enviadas">
		        #{msgs.carregando_msg}<br />  
		        <p:graphicImage value="../img/icones/ajax-loader.gif"/>  
		    </p:blockUI>  
			
			<p:contextMenu for="tabelaDeMensagens_enviadas">
				<p:menuitem value="#{msgs.ler_mensagem}" update="dialogoLeituraPainel_enviadas, msgForm_enviadas" icon="ui-icon-folder-open"
					oncomplete="dialogoLeitura_enviadas.show()" />
			</p:contextMenu>

			<p:dataTable id="tabelaDeMensagens_enviadas" var="mensag" lazy="true" value="#{mensagemEnviadasBean.mensagemsTodas}" paginator="true" rows="10" 
				emptyMessage="#{msgs.nenhum_dado_encontrado}" style="table-layout: fixed; height:340px" rowStyleClass="#{mensag.lida == false ? 'old' : null}"
				selection="#{mensagemEnviadasBean.mensagem}" selectionMode="single">  
				
				<p:columnGroup type="header">  
					<p:row>  
						<p:column rowspan="2" headerText="#{msgs.msg_destinatario}" sortBy="#{mensag.destinatario.nome}" />  
						<p:column rowspan="2" headerText="#{msgs.titulo_msg}" />  
						<p:column colspan="2" headerText="#{msgs.msg_enviadas}" sortBy="#{mensag.data}"/>  
						<p:column colspan="2" headerText="#{msgs.lida_msg}" />  
						<p:column rowspan="2" headerText="#{msgs.resumo_msg}" />  
					</p:row>  
					<p:row>  
						<p:column headerText="#{msgs.data_msg}" />  
						<p:column headerText="#{msgs.hora_msg}" />  
						<p:column headerText="#{msgs.data_msg}" />  
						<p:column headerText="#{msgs.hora_msg}" />  
					</p:row>  
				</p:columnGroup>  
				
				
		        <p:column width="100">  
   					#{mensag.destinatario.nome}
		        </p:column>
		  
		        <p:column width="140">
   					#{mensag.titulo} 
		        </p:column>
		        
		        <p:column width="60">  
   					<h:outputText value="#{mensag.data}">
						<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
					</h:outputText>
		        </p:column>  

		        <p:column width="60">  
   					<h:outputText value="#{mensag.data}">
						<f:convertDateTime pattern="HH:mm:ss" type="time" />
					</h:outputText>
		        </p:column>  

		        <p:column width="60">  
   					<h:outputText value="#{mensag.dataLeitura}">
						<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
					</h:outputText>
		        </p:column>  

		        <p:column width="40">  
   					<h:outputText value="#{mensag.dataLeitura}">
						<f:convertDateTime pattern="HH:mm:ss" type="time" />
					</h:outputText>
		        </p:column>  

		        <p:column>
   					#{mensag.mensagemResumo} 
		        </p:column>
		        
		    </p:dataTable>
		    
		    <p:commandButton oncomplete="dialogoLeitura_enviadas.show()" value="#{msgs.ler_mensagem}" icon="ui-icon-search" update="dialogoLeituraPainel_enviadas,tabelaDeMensagens_enviadas"/>
		    
		    <p:dialog widgetVar="dialogoLeitura_enviadas" header="#{mensagemEnviadasBean.mensagem.destinatario.nome}" modal="true" maximizable="true">
		    	<p:outputPanel id="dialogoLeituraPainel_enviadas" style="text-align:justfy; width:100%" layout="block">
		    		<p:panelGrid style="width:100%; height:100%" id="painelGridLeitura_enviadas">
		    			<p:row>
			    			<p:column width="50">#{msgs.data_msg}</p:column>
			    			<p:column>
			   					<h:outputText value="#{mensagemEnviadasBean.mensagem.data}">
									<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
								</h:outputText>
			    			</p:column>
		    			</p:row>
		    			<p:row>
			    			<p:column colspan="2">
		    					<h:outputText value="#{mensagemEnviadasBean.mensagem.mensagem}" escape="false"/>
		    				</p:column>
		    			</p:row>
		    			<f:facet name="footer">
			    			<p:row>
				    			<p:column colspan="2">
							    	<p:commandButton oncomplete="dialogoLeitura_enviadas.hide()" value="#{msgs.fechar_msg}" icon="ui-icon-search" update="tabelaDeMensagens_enviadas"/>
							    </p:column>
							</p:row>
					    </f:facet>
					</p:panelGrid>
		        </p:outputPanel>
		    </p:dialog>  
		</h:form>
</html>