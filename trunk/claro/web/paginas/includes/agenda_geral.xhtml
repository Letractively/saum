<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:core="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core">

	<h:form id="formAGGERAL">
	    <p:blockUI block="formAGGERAL" trigger="tabelaAgendas">  
	       	#{msgs.carregando_msg}<br />  
	       	<p:graphicImage value="../img/icones/ajax-loader.gif"/>  
	    </p:blockUI>
	
		<p:dataTable id="tabelaAgendas" widgetVar="tabelaDeAgendas" var="lista" value="#{agendaGeralBean.calendarios}" paginator="true" 
			rows="10" lazy="true" emptyMessage="#{msgs.nenhum_dado_encontrado}">  
	        
			<f:facet name="header">  
	 			#{msgs.lista_de_agendamento}
	        </f:facet>
	
			<p:column style="width:16px">
				<p:rowToggler />
			</p:column>
	
			<p:column headerText="#{msgs.codigo_msg}" sortBy="#{lista.id}" styleClass="coluna3">
	 			#{lista.id}
	        </p:column>
	  
	        <p:column headerText="#{msgs.cliente_msg}">
	 			#{lista.warehouse.cliente.nomeFantasia}
	        </p:column>
	
	        <p:column headerText="#{msgs.warehouse_msg}">
	 			#{lista.warehouse.nomeFantasia}
	        </p:column>
	
	        <p:column headerText="#{msgs.data_msg}" sortBy="#{lista.dataInicial}" styleClass="coluna2">
	        	<h:outputText value="#{lista.dataInicial}">
					<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
				</h:outputText>
	        </p:column>
	        
	        <p:column headerText="#{msgs.hora_msg}" styleClass="coluna2">
	 					<h:outputText value="#{lista.dataInicial}">
					<f:convertDateTime pattern="HH:mm" type="time" />
				</h:outputText>
	        </p:column>
	        
	        <p:column headerText="#{msgs.qtd_msg}" sortBy="#{lista.quantidade}" styleClass="coluna">
				#{lista.quantidade}
	        </p:column>
	        
	        <p:column headerText="#{msgs.lote_msg}" styleClass="coluna">
				#{lista.qtdLotes}
	        </p:column>
	        
	        <p:rowExpansion>
		        	<br/>
		        	<p:dataTable id="tbConsulta" var="lsInt" value="#{lista.triagemLotes}" widgetVar="tabelaConsulta"
						emptyMessage="#{msgs.nenhum_dado_encontrado}" rowKey="#{lista.id}" rowStyleClass="classROW">
		        	
						<f:facet name="header">#{msgs.lista_lotes_triagem}</f:facet>

						<p:column headerText="#{msgs.codigo_msg}" styleClass="coluna3">
				 			#{lsInt.id}
				        </p:column>
				
						<p:column headerText="#{msgs.data_msg}" styleClass="coluna2">
				        	<h:outputText value="#{lsInt.dataCriacaoLote}">
								<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
							</h:outputText>
				        </p:column>
		
				       	<p:column headerText="#{msgs.hora_msg}" styleClass="coluna2">
		   					<h:outputText value="#{lsInt.dataCriacaoLote}">
								<f:convertDateTime pattern="HH:mm" type="time" />
							</h:outputText>
				        </p:column>
				        
				        <p:column headerText="#{msgs.marca_msg}">
				 			#{lsInt.aparelhoModelo.aparelhoMarca.nome}
				        </p:column>
				
				        <p:column headerText="#{msgs.modelo_msg}">
				 			#{lsInt.aparelhoModelo.nome}
				        </p:column>
		
				        <p:column headerText="#{msgs.qtd_msg}" sortBy="#{lsInt.quantidade}" styleClass="coluna">
							#{lsInt.quantidade}
				        </p:column>
			    	</p:dataTable>
			    	<br/>
	        </p:rowExpansion>
	    </p:dataTable>
	</h:form>
</html>